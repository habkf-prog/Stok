<!-- CLEAN BUILD: App Only (No Login) + FULL ACCESS | Generated 2026-01-31 23:44 UTC -->
<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<title>Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
:root{--bg:#07101f;--card:rgba(255,255,255,.06);--card2:rgba(255,255,255,.04);--line:rgba(255,255,255,.10);--text:#eaf0ff;--muted:#9fb0d0;--accent:#4da3ff;--good:#2fe39a;--bad:#ff6b6b;--warn:#ffcf5a;--shadow:0 14px 40px rgba(0,0,0,.35);--radius:18px}
*{box-sizing:border-box}
body{margin:0;padding:14px;font-family:system-ui,-apple-system,"Segoe UI",Tahoma,Arial;color:var(--text);background:radial-gradient(900px 600px at 15% 0%, rgba(77,163,255,.18), transparent 60%),radial-gradient(700px 500px at 90% 15%, rgba(47,227,154,.12), transparent 55%),var(--bg)}
.container{max-width:1120px;margin:0 auto}
.header{display:flex;justify-content:space-between;align-items:flex-end;gap:12px;flex-wrap:wrap;margin:6px 0 14px}
h1{margin:0;font-size:20px}
.sub{margin:6px 0 0;color:var(--muted);font-size:13px}
.card{background:linear-gradient(180deg,var(--card),var(--card2));border:1px solid var(--line);border-radius:var(--radius);box-shadow:var(--shadow);padding:14px;margin-bottom:14px}
.row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.right{margin-right:auto}
.input,.select,.textarea{width:100%;padding:12px 12px;border-radius:14px;border:1px solid rgba(255,255,255,.12);background:rgba(0,0,0,.20);color:var(--text);outline:none;font-size:14px}
.textarea{min-height:90px;resize:vertical}
.input::placeholder,.textarea::placeholder{color:rgba(234,240,255,.55)}
.input:focus,.select:focus,.textarea:focus{border-color:rgba(77,163,255,.55);box-shadow:0 0 0 3px rgba(77,163,255,.18)}
.btn{padding:12px 14px;border-radius:14px;border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.07);color:var(--text);cursor:pointer;font-size:14px;transition:.15s;display:inline-flex;gap:8px;align-items:center;user-select:none}
.btn:hover{background:rgba(255,255,255,.10)}
.btn:active{transform:translateY(1px)}
.btn.primary{border-color:rgba(77,163,255,.45);background:rgba(77,163,255,.16)}
.btn.danger{border-color:rgba(255,107,107,.45);background:rgba(255,107,107,.14)}
.btn.ghost{background:transparent}
.badge{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;font-size:12px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.06);white-space:nowrap}
.dot{width:7px;height:7px;border-radius:50%}
.ok .dot{background:var(--good)}.bad .dot{background:var(--bad)}.warn .dot{background:var(--warn)}
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.grid3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px}
.full{grid-column:1 / -1}
.tableWrap{overflow:auto;border-radius:14px;border:1px solid rgba(255,255,255,.10)}
table{width:100%;min-width:1100px;border-collapse:separate;border-spacing:0}
th,td{padding:12px 10px;border-bottom:1px solid rgba(255,255,255,.08);text-align:right;font-size:13px;vertical-align:top}
th{position:sticky;top:0;background:rgba(10,18,35,.85);backdrop-filter:blur(8px);color:var(--muted);z-index:1}
tr:hover td{background:rgba(255,255,255,.03)}
.muted{color:var(--muted);font-size:12px}
.kpis{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-bottom:12px}
.kpi{padding:12px;border-radius:16px;border:1px solid rgba(255,255,255,.10);background:rgba(0,0,0,.18)}
.kpi .t{color:var(--muted);font-size:12px}
.kpi .v{font-size:18px;margin-top:6px}
.modalBack{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;padding:14px;z-index:999}
.modal{width:min(760px,100%);background:linear-gradient(180deg,rgba(18,28,51,.98),rgba(18,28,51,.90));border:1px solid rgba(255,255,255,.12);border-radius:18px;box-shadow:0 20px 60px rgba(0,0,0,.45);padding:14px}
.modalHeader{display:flex;align-items:center;gap:10px;justify-content:space-between;margin-bottom:10px}
.modalHeader h3{margin:0;font-size:16px}
hr{border:0;border-top:1px solid rgba(255,255,255,.10);margin:10px 0}
.actions{position:relative;display:inline-block}
.menu{position:absolute;inset-inline-end:0;min-width:210px;background:rgba(18,28,51,.98);border:1px solid rgba(255,255,255,.12);border-radius:14px;box-shadow:0 18px 60px rgba(0,0,0,.45);padding:6px;display:none;z-index:50}
.menu.down{top:44px}.menu.up{bottom:44px}.menu.open{display:block}
.menu button{width:100%;justify-content:flex-start;padding:10px 12px;border-radius:12px;border:0;background:transparent;color:var(--text);cursor:pointer;display:flex;gap:10px;align-items:center;font-size:14px;text-align:right}
.menu button:hover{background:rgba(255,255,255,.08)}
.menu .dangerItem{color:#ffd0d0}
.menu .sep{height:1px;background:rgba(255,255,255,.10);margin:6px 4px}
@media (max-width:860px){.kpis{grid-template-columns:repeat(2,1fr)}.grid3{grid-template-columns:1fr}}
@media (max-width:720px){body{padding:10px}.grid2{grid-template-columns:1fr}}

.toggleWrap{display:inline-flex;align-items:center;gap:10px;padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.06);font-size:12px;color:var(--muted)}
.switch{position:relative;width:44px;height:24px;display:inline-block}
.switch input{opacity:0;width:0;height:0}
.slider{position:absolute;cursor:pointer;inset:0;border-radius:999px;border:1px solid rgba(255,255,255,.16);background:rgba(0,0,0,.22);transition:.15s}
.slider:before{content:"";position:absolute;height:18px;width:18px;right:3px;top:2px;border-radius:50%;background:rgba(255,255,255,.75);transition:.15s}
.switch input:checked + .slider{background:rgba(47,227,154,.16);border-color:rgba(47,227,154,.35)}
.switch input:checked + .slider:before{transform:translateX(-20px);background:rgba(255,255,255,.9)}


#syncMenuBtn{display:inline-flex}

/* --- Chart collapse (show only when Monthly Income opened) --- */
#chartWrap{display:none;margin-top:10px}
#incomeChart{max-height:240px;width:100% !important}

</style>
</head>
<body>
<div class="container">
  <div class="header">
    <div>
      <h1>Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª</h1>
      <p class="sub">Ù…Ù„Ù ÙˆØ§Ø­Ø¯ â€” Ø¥Ø¹Ø¯Ø§Ø¯ ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± Ø¯Ø§Ø®Ù„ Ø§Ù„ØµÙØ­Ø© + ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù…Ù† Ø¯Ø§Ø®Ù„ Ø§Ù„Ù„ÙˆØ­Ø© + Backup/Restore</p>
    </div>
    <div class="row">
      <span class="badge" id="roleTag" style="display:none"><span class="dot"></span> Ø§Ù„Ø¯ÙˆØ±: -</span>
      <button class="btn" id="lockBtn" style="display:none" onclick="lockNow()">ğŸ”’ Ù‚ÙÙ„</button>
      <button class="btn" id="logoutBtn" style="display:none" onclick="logout()">ğŸšª Ø®Ø±ÙˆØ¬</button>
    <button class="btn primary" id="syncMenuBtn" onclick="openSyncMenu()">â˜ï¸ Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©</button>
</div>
  </div>

  
    <p class="muted" style="margin:10px 0 0" id="lockMsg"></p>

    <hr>
    <div class="row" style="justify-content:space-between">
      <div>
        <div style="font-size:14px">âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯ Ø£ÙˆÙ„ Ù…Ø±Ø© (Ø¨Ø¯ÙˆÙ† ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù„Ù)</div>
        <div class="muted">Ø³ÙŠØªÙ… Ø­ÙØ¸ Hash Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…ØªØµÙØ­</div>
      </div>
      <button class="btn" onclick="toggleSetup()">ÙØªØ­/Ø¥ØºÙ„Ø§Ù‚</button>
    </div>

    <div id="setupBox" style="display:none; margin-top:10px">
      <div class="grid3">
        <input class="input" id="s_admin" type="password" placeholder="ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± admin (Ù…Ø·Ù„ÙˆØ¨Ø©)">
        <input class="input" id="s_staff" type="password" placeholder="ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± staff (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">
        <input class="input" id="s_viewer" type="password" placeholder="ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± viewer (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">
      </div>
      <div class="row" style="margin-top:10px">
        <button class="btn primary" onclick="saveSetup()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯</button>
        <button class="btn danger" onclick="resetSetup()">ğŸ§¹ Ø­Ø°Ù Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯</button>
        <span class="muted">Ø¥Ø°Ø§ ØªØ±ÙƒØª staff/viewer ÙØ§Ø±ØºÙŠÙ† â†’ Ù†ÙØ³ ÙƒÙ„Ù…Ø© admin</span>
      </div>
      <p class="muted" style="margin-top:8px">Ù†ØµÙŠØ­Ø©: Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ØŒ Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ admin Ø«Ù… Ø§Ø¹Ù…Ù„ Backup.</p>
    </div>

    <hr>
    <p class="muted">
      âš ï¸ Ø¹Ù„Ù‰ Ø¨Ø¹Ø¶ Ø£Ø¬Ù‡Ø²Ø© Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯ Ù‚Ø¯ Ù„Ø§ ÙŠÙƒÙˆÙ† Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø«Ø§Ø¨ØªÙ‹Ø§ Ù…Ø¹ <b>file://</b>.
      Ø§Ø³ØªØ®Ø¯Ù… Ø²Ø± <b>Backup</b> Ø¯Ø§Ø®Ù„ Ø§Ù„Ù„ÙˆØ­Ø© Ù„ØªÙØ§Ø¯ÙŠ Ø¶ÙŠØ§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.
    </p>
  </div>

  <div id="app">
    <div class="card">
      <div class="kpis">
        <div class="kpi"><div class="t">Ø¥Ø¬Ù…Ø§Ù„ÙŠ</div><div class="v" id="k_all">0</div></div>
        <div class="kpi"><div class="t">Ù†Ø´Ø·</div><div class="v" id="k_active">0</div></div>
        <div class="kpi"><div class="t">Ù‚Ø§Ø±Ø¨ ÙŠÙ†ØªÙ‡ÙŠ (â‰¤ 7 Ø£ÙŠØ§Ù…)</div><div class="v" id="k_near">0</div></div>
        <div class="kpi"><div class="t">Ù…Ù†ØªÙ‡ÙŠ</div><div class="v" id="k_expired">0</div></div>
      </div>

      <div class="grid3">
        <input class="input" id="search" placeholder="ğŸ” Ø¨Ø­Ø« (Ø¨Ø§Ù„Ø§Ø³Ù…/Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„/Ø§Ù„Ø®Ø·Ø©/Ù…Ù„Ø§Ø­Ø¸Ø§Øª)..." oninput="render()">
        <select class="select" id="filterStatus" onchange="render()">
          <option value="all">ÙÙ„ØªØ±Ø©: Ø§Ù„ÙƒÙ„</option>
          <option value="active">Ù†Ø´Ø·</option>
          <option value="near">Ù‚Ø§Ø±Ø¨ ÙŠÙ†ØªÙ‡ÙŠ</option>
          <option value="expired">Ù…Ù†ØªÙ‡ÙŠ</option>
        </select>
        <select class="select" id="sort" onchange="render()">
          <option value="newest">ØªØ±ØªÙŠØ¨: Ø§Ù„Ø£Ø­Ø¯Ø« Ø¥Ø¶Ø§ÙØ©</option>
          <option value="oldest">Ø§Ù„Ø£Ù‚Ø¯Ù… Ø¥Ø¶Ø§ÙØ©</option>
          <option value="end_asc">Ø§Ù„Ø£Ù‚Ø±Ø¨ Ø§Ù†ØªÙ‡Ø§Ø¡Ù‹</option>
          <option value="end_desc">Ø§Ù„Ø£Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡Ù‹</option>
          <option value="name_asc">Ø§Ù„Ø§Ø³Ù… (Ø£-ÙŠ)</option>
          <option value="name_desc">Ø§Ù„Ø§Ø³Ù… (ÙŠ-Ø£)</option>
          <option value="email_asc">Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ (A-Z)</option>
          <option value="email_desc">Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ (Z-A)</option>
        </select>
      </div>

      <hr>

      <div class="row">
        <button class="btn primary" id="addBtn" onclick="openAdd()">â• Ø¥Ø¶Ø§ÙØ© Ø§Ø´ØªØ±Ø§Ùƒ</button>
        <button class="btn" id="exportBtn" onclick="exportCSV()">â¬‡ï¸ ØªØµØ¯ÙŠØ± CSV</button>

        <label class="btn" id="importBtn" style="cursor:pointer">
          â¬†ï¸ Ø§Ø³ØªÙŠØ±Ø§Ø¯ CSV
          <input type="file" accept=".csv" style="display:none" onchange="importCSV(event)">
        </label>

        
        
        
        
        
        <span class="toggleWrap" title="ØªÙ†Ø¨ÙŠÙ‡ Ø¥Ø°Ø§ Ù…Ø±Ù‘ ÙŠÙˆÙ… Ø¨Ø¯ÙˆÙ† Backup/Restore">
          <span>ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ù†Ø³Ø® Ø§Ù„ÙŠÙˆÙ…ÙŠ</span>
          <label class="switch">
            <input type="checkbox" id="autoBackupToggle">
            <span class="slider"></span>
          </label>
        </span>

        <span class="badge" id="syncBadge" title="Ø¢Ø®Ø± Backup/Restore" style="margin-inline-start:6px"><span class="dot"></span><span id="syncText">Ø¢Ø®Ø± Ù…Ø²Ø§Ù…Ù†Ø©: -</span></span>

        <label class="btn" style="cursor:pointer">
          ğŸ“¥ Restore
          <input type="file" accept=".json" style="display:none" onchange="restoreJSON(event)">
        </label>

        <button class="btn" onclick="openPwModal()">ğŸ”‘ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</button>

        <select class="select" id="renewMode" style="max-width:260px" title="Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªØ¬Ø¯ÙŠØ¯">
          <option value="end" selected>Ø§Ù„ØªØ¬Ø¯ÙŠØ¯: Ù…Ù† ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡</option>
          <option value="today">Ø§Ù„ØªØ¬Ø¯ÙŠØ¯: Ù…Ù† Ø§Ù„ÙŠÙˆÙ…</option>
        </select>

        <span class="right"></span>
        <button class="btn danger" id="clearBtn" onclick="clearAll()">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„</button>
      </div>
      <p class="muted" style="margin:10px 0 0">ØµÙŠØºØ© CSV: name,email,plan,price,start,months,notes</p>
      <p class="muted" style="margin:6px 0 0">ğŸ’¡ Ù„Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø¨ÙŠÙ† Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø¨Ø¯ÙˆÙ† Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª: Ø§Ø¶ØºØ· <b>Ù…Ø´Ø§Ø±ÙƒØ© Backup</b> ÙˆØ§Ø®ØªØ± Google Drive/Dropbox/TelegramØŒ Ø«Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ø¢Ø®Ø± Ø§Ø¶ØºØ· <b>Restore</b> ÙˆØ§Ø®ØªØ± Ù†ÙØ³ Ø§Ù„Ù…Ù„Ù.</p>
    </div>

    <div class="card" id="incomeCard">
      <div class="row" style="justify-content:space-between; align-items:center">
        <div>
          <div style="font-size:16px; margin-bottom:6px">ğŸ’° Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„Ø´Ù‡Ø±ÙŠ</div>
          <div class="muted">Ø§Ø®ØªØ± Ø§Ù„Ø´Ù‡Ø± ÙˆØ·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø­Ø³Ø§Ø¨</div>
        </div>
        <div class="badge"><span class="dot"></span><span id="incomeRoleNote">ØªÙ‚Ø§Ø±ÙŠØ± Ø´Ù‡Ø±ÙŠØ©</span></div>
      </div>

      <div class="grid3" style="margin-top:10px">
        <input class="input" id="incomeMonth" type="month">
        <select class="select" id="incomeMode" onchange="calcMonthlyIncome()">
          <option value="start" selected>Ø­Ø³Ø¨ ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„ (Ø¨Ø¯Ø£Øª Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±)</option>
          <option value="spread">Ù…ÙˆØ²Ù‘Ø¹ Ø¹Ù„Ù‰ Ø£Ø´Ù‡Ø± Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ (Ø§Ù„Ø³Ø¹Ø±/Ø§Ù„Ù…Ø¯Ø©)</option>
          <option value="payments">Ø­Ø³Ø¨ Ø§Ù„Ø¯ÙØ¹Ø§Øª/Ø§Ù„ØªØ¬Ø¯ÙŠØ¯Ø§Øª (Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª)</option>
        </select>
        <select class="select" id="currency" onchange="calcMonthlyIncome()">
          <option value="DZD" selected>DZD</option>
          <option value="USD">USD</option>
          <option value="EUR">EUR</option>
          <option value="custom">Ø¹Ù…Ù„Ø© Ù…Ø®ØµØµØ©...</option>
        </select>
      </div>

      <div class="row" style="margin-top:10px">
        <input class="input" id="customCurrency" placeholder="Ø§ÙƒØªØ¨ Ø±Ù…Ø² Ø§Ù„Ø¹Ù…Ù„Ø© (Ù…Ø«Ø§Ù„: MAD)" style="display:none; max-width:260px">
        <button class="btn primary" onclick="calcMonthlyIncome()">ğŸ§® Ø§Ø­Ø³Ø¨</button>
      </div>

      <div class="kpis" style="margin-top:12px">
        <div class="kpi">
          <div class="t">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø®Ù„ Ù„Ù„Ø´Ù‡Ø±</div>
          <div class="v" id="incomeTotal">0</div>
          <div class="muted" id="incomeHint" style="margin-top:6px"></div>
        </div>
        <div class="kpi"><div class="t">Ø¹Ø¯Ø¯</div><div class="v" id="incomeCount">0</div></div>
        <div class="kpi"><div class="t">Ù…ØªÙˆØ³Ø·</div><div class="v" id="incomeAvg">0</div></div>
        <div class="kpi"><div class="t">Ø£Ø¹Ù„Ù‰ Ø®Ø·Ø©</div><div class="v" id="incomeTopPlan">-</div></div>
      </div>

      <div class="tableWrap" style="margin-top:12px">
        <table style="min-width:700px">
          <thead><tr><th>Ø§Ù„Ø®Ø·Ø©</th><th>Ø¹Ø¯Ø¯</th><th>Ø§Ù„Ø¯Ø®Ù„</th></tr></thead>
          <tbody id="incomePlanRows"></tbody>
        </table>
      </div>

      <div class="card" style="margin-top